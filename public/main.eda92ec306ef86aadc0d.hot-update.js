/*! For license information please see main.eda92ec306ef86aadc0d.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdategala_digdaya("main",{"./app/classes/Page.js":(t,e,s)=>{s.r(e),s.d(e,{default:()=>w});var i=s("./node_modules/gsap/index.js"),n=s("./node_modules/prefix/index.js"),a=s.n(n),o=s("./node_modules/lodash/each.js"),r=s.n(o),l=s("./node_modules/lodash/map.js"),h=s.n(l);Object(function(){var t=new Error("Cannot find module 'animations/Buttons'");throw t.code="MODULE_NOT_FOUND",t}());var m=s("./app/animations/Title.js"),c=s("./app/animations/Paragraph.js"),d=s("./app/animations/Label.js"),u=s("./app/animations/Highlight.js"),p=s("./app/classes/AsyncLoad.js"),g=s("./app/classes/Colors.js");class w{constructor({element:t,elements:e,id:s}){this.selector=t,this.selectorChildren={preloaders:"[data-src]",animationsButtons:'[data-animation="button"]',animationsTitles:'[data-animation="title"]',aimationsHighlights:'[data-animation="highlight"]',animationsParagraphs:'[data-animation="paragraph"]',animationsLabels:'[data-animation="label"]',...e},this.id=s,this.transformPrefix=a()("transform")}create(){this.element=document.querySelector(this.selector),this.elements={},this.scroll={current:0,target:0,last:0,limit:0},this.x={start:0,distance:0,end:0},this.y={start:0,distance:0,end:0},r()(this.selectorChildren,((t,e)=>{t instanceof window.HTMLElement||t instanceof window.NodeList||Array.isArray(t)?this.elements[e]=t:(this.elements[e]=document.querySelectorAll(t),0===this.elements[e].length?this.elements[e]=null:1===this.elements[e].length&&(this.elements[e]=document.querySelector(t)))})),this.createAnimations(),this.createPreloader()}createPreloader(){this.preloaders=h()(this.elements.preloaders,(t=>new p.default({element:t})))}createAnimations(){this.animations=[],this.animationsButtons=h()(this.elements.animationsButtons,(t=>new Object(function(){var t=new Error("Cannot find module 'animations/Buttons'");throw t.code="MODULE_NOT_FOUND",t}())({element:t}))),this.animations.push(...this.animationsButtons),this.animationsButtons=h()(this.elements.animationsButtons,(t=>new m.default({element:t}))),this.animations.push(...this.animationsButtons),this.animationsParagraphs=h()(this.elements.animationsParagraphs,(t=>new c.default({element:t}))),this.animations.push(...this.animationsParagraphs),this.animationsLabels=h()(this.elements.animationsLabels,(t=>new d.default({element:t}))),this.animations.push(...this.animationsLabels),this.aimationsHighlights=h()(this.elements.aimationsHighlights,(t=>new u.default({element:t}))),this.animations.push(...this.aimationsHighlights)}createObserver(){this.observer=new window.ResizeObserver((t=>{for(const e of t)window.requestAnimationFrame((t=>{this.scroll.limit=h()(this.elements.wrapper).height-window.innerHeight}))})),this.observer.observe(this.elements.wrapper)}show(t){return new Promise((e=>{g.ColorsManager.change({backgroundColor:this.element.getAttribute("data-background"),color:this.element.getAttribute("data-color")}),t?this.animationIn=t:(this.animationIn=i.default.timeline(),this.animationIn.fromTo(this.element,{autoAlpha:0},{autoAlpha:1})),this.animationIn.call((t=>{this.addEventListeners(),e()}))}))}hide(){return new Promise((t=>{this.destroy(),this.animationIn=i.default.timeline(),this.animationIn.to(this.element,{autoAlpha:0,onComplete:t})}))}onResize(){this.elements.wrapper&&(this.scroll.limit=this.elements.wrapper.clientHeight-window.innerHeight),r()(this.animations,(t=>t.onResize()))}onWheel({pixelY:t}){this.scroll.target+=.5*t}onTouchDown(t){this.isDown=!0,this.y.start=t.touches?t.touches[0].clientY:t.clientY,this.scroll.start=this.scroll.current}onTouchUp(t){this.isDown=!1}onTouchMove(t){if(!this.isDown)return;this.y.end=t.touches?t.touches[0].clientY:t.clientY;const e=this.y.start-this.y.end;this.scroll.target=this.scroll.start+e}update(){this.scroll.target=i.default.utils.clamp(0,this.scroll.limit,this.scroll.target),this.scroll.current=i.default.utils.interpolate(this.scroll.current,this.scroll.target,.1),this.scroll.current<.01&&(this.scroll.current=0),this.elements.wrapper&&(this.elements.wrapper.style[this.transformPrefix]=`translate3d(0px, -${this.scroll.current}px, 0px)`)}addEventListeners(){}removeEventListeners(){}destroy(){this.removeEventListeners()}}}},(function(t){t.h=()=>"182d64416b14b364de8b"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFBUyxDQUNoQixDQUVBSSxZQUFhbEMsR0FDWCxJQUFLakQsS0FBSytFLE9BQVEsT0FDbEIvRSxLQUFLdUIsRUFBRUQsSUFBTTJCLEVBQUUrQixRQUFVL0IsRUFBRStCLFFBQVEsR0FBR0MsUUFBVWhDLEVBQUVnQyxRQUNsRCxNQUFNNUQsRUFBV3JCLEtBQUt1QixFQUFFSCxNQUFRcEIsS0FBS3VCLEVBQUVELElBRXZDdEIsS0FBS2MsT0FBT0UsT0FBU2hCLEtBQUtjLE9BQU9NLE1BQVFDLENBQzNDLENBSUErRCxTQUNFcEYsS0FBS2MsT0FBT0UsT0FBU2dELEVBQUFBLFFBQUFBLE1BQUFBLE1BQWlCLEVBQUdoRSxLQUFLYyxPQUFPSSxNQUFPbEIsS0FBS2MsT0FBT0UsUUFFeEVoQixLQUFLYyxPQUFPQyxRQUFVaUQsRUFBQUEsUUFBQUEsTUFBQUEsWUFBdUJoRSxLQUFLYyxPQUFPQyxRQUFTZixLQUFLYyxPQUFPRSxPQUFRLElBRWxGaEIsS0FBS2MsT0FBT0MsUUFBVSxNQUN4QmYsS0FBS2MsT0FBT0MsUUFBVSxHQUdwQmYsS0FBS0YsU0FBU3FELFVBQ2hCbkQsS0FBS0YsU0FBU3FELFFBQVFrQyxNQUFNckYsS0FBS1MsaUJBQW9CLHFCQUFvQlQsS0FBS2MsT0FBT0Msa0JBRXpGLENBSUFzRCxvQkFBc0IsQ0FFdEJpQix1QkFBeUIsQ0FJekJmLFVBQ0V2RSxLQUFLc0Ysc0JBQ1Asa0JDalFGQyxFQUFvQkMsRUFBSSxJQUFNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2FsYV9kaWdkYXlhLy4vYXBwL2NsYXNzZXMvUGFnZS5qcyIsIndlYnBhY2s6Ly9nYWxhX2RpZ2RheWEvd2VicGFjay9ydW50aW1lL2dldEZ1bGxIYXNoIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG5pbXBvcnQgR1NBUCBmcm9tICdnc2FwJ1xuXG5pbXBvcnQgUHJlZml4IGZyb20gJ3ByZWZpeCdcblxuaW1wb3J0IGVhY2ggZnJvbSAnbG9kYXNoL2VhY2gnXG5pbXBvcnQgbWFwIGZyb20gJ2xvZGFzaC9tYXAnXG5cbmltcG9ydCBCdXR0b25zIGZyb20gJ2FuaW1hdGlvbnMvQnV0dG9ucydcbmltcG9ydCBUaXRsZSBmcm9tICdhbmltYXRpb25zL1RpdGxlJ1xuaW1wb3J0IFBhcmFncmFwaCBmcm9tICdhbmltYXRpb25zL1BhcmFncmFwaCdcbmltcG9ydCBMYWJlbCBmcm9tICdhbmltYXRpb25zL0xhYmVsJ1xuaW1wb3J0IEhpZ2hsaWdodCBmcm9tICdhbmltYXRpb25zL0hpZ2hsaWdodCdcblxuaW1wb3J0IEFzeW5jTG9hZCBmcm9tICdjbGFzc2VzL0FzeW5jTG9hZCdcblxuaW1wb3J0IHsgQ29sb3JzTWFuYWdlciB9IGZyb20gJ2NsYXNzZXMvQ29sb3JzJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYWdlIHtcbiAgY29uc3RydWN0b3IgKHsgZWxlbWVudCwgZWxlbWVudHMsIGlkIH0pIHtcbiAgICB0aGlzLnNlbGVjdG9yID0gZWxlbWVudFxuICAgIHRoaXMuc2VsZWN0b3JDaGlsZHJlbiA9IHtcbiAgICAgIHByZWxvYWRlcnM6ICdbZGF0YS1zcmNdJyxcbiAgICAgIGFuaW1hdGlvbnNCdXR0b25zOiAnW2RhdGEtYW5pbWF0aW9uPVwiYnV0dG9uXCJdJyxcbiAgICAgIGFuaW1hdGlvbnNUaXRsZXM6ICdbZGF0YS1hbmltYXRpb249XCJ0aXRsZVwiXScsXG4gICAgICBhaW1hdGlvbnNIaWdobGlnaHRzOiAnW2RhdGEtYW5pbWF0aW9uPVwiaGlnaGxpZ2h0XCJdJyxcbiAgICAgIGFuaW1hdGlvbnNQYXJhZ3JhcGhzOiAnW2RhdGEtYW5pbWF0aW9uPVwicGFyYWdyYXBoXCJdJyxcbiAgICAgIGFuaW1hdGlvbnNMYWJlbHM6ICdbZGF0YS1hbmltYXRpb249XCJsYWJlbFwiXScsXG4gICAgICAuLi5lbGVtZW50c1xuICAgIH1cblxuICAgIHRoaXMuaWQgPSBpZFxuXG4gICAgdGhpcy50cmFuc2Zvcm1QcmVmaXggPSBQcmVmaXgoJ3RyYW5zZm9ybScpXG4gIH1cblxuICBjcmVhdGUgKCkge1xuICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5zZWxlY3RvcilcbiAgICB0aGlzLmVsZW1lbnRzID0ge31cblxuICAgIHRoaXMuc2Nyb2xsID0ge1xuICAgICAgY3VycmVudDogMCxcbiAgICAgIHRhcmdldDogMCxcbiAgICAgIGxhc3Q6IDAsXG4gICAgICBsaW1pdDogMFxuICAgIH1cblxuICAgIHRoaXMueCA9IHtcbiAgICAgIHN0YXJ0OiAwLFxuICAgICAgZGlzdGFuY2U6IDAsXG4gICAgICBlbmQ6IDBcbiAgICB9XG5cbiAgICB0aGlzLnkgPSB7XG4gICAgICBzdGFydDogMCxcbiAgICAgIGRpc3RhbmNlOiAwLFxuICAgICAgZW5kOiAwXG4gICAgfVxuXG4gICAgZWFjaCh0aGlzLnNlbGVjdG9yQ2hpbGRyZW4sIChlbnRyeSwga2V5KSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIGVudHJ5IGluc3RhbmNlb2Ygd2luZG93LkhUTUxFbGVtZW50IHx8XG4gICAgICAgIGVudHJ5IGluc3RhbmNlb2Ygd2luZG93Lk5vZGVMaXN0IHx8XG4gICAgICAgIEFycmF5LmlzQXJyYXkoZW50cnkpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5lbGVtZW50c1trZXldID0gZW50cnlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZWxlbWVudHNba2V5XSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZW50cnkpXG5cbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudHNba2V5XS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aGlzLmVsZW1lbnRzW2tleV0gPSBudWxsXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtZW50c1trZXldLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIHRoaXMuZWxlbWVudHNba2V5XSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZW50cnkpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuXG4gICAgdGhpcy5jcmVhdGVBbmltYXRpb25zKClcblxuICAgIHRoaXMuY3JlYXRlUHJlbG9hZGVyKClcbiAgfVxuXG4gIGNyZWF0ZVByZWxvYWRlciAoKSB7XG4gICAgdGhpcy5wcmVsb2FkZXJzID0gbWFwKHRoaXMuZWxlbWVudHMucHJlbG9hZGVycywgKGVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiBuZXcgQXN5bmNMb2FkKHsgZWxlbWVudCB9KVxuICAgIH0pXG4gIH1cblxuICAvLyBBbmltYXRpb25zXG5cbiAgY3JlYXRlQW5pbWF0aW9ucyAoKSB7XG4gICAgdGhpcy5hbmltYXRpb25zID0gW11cblxuICAgIC8vIEJ1dHRvblxuXG4gICAgdGhpcy5hbmltYXRpb25zQnV0dG9ucyA9IG1hcCh0aGlzLmVsZW1lbnRzLmFuaW1hdGlvbnNCdXR0b25zLCAoZWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBCdXR0b25zKHtcbiAgICAgICAgZWxlbWVudFxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgdGhpcy5hbmltYXRpb25zLnB1c2goLi4udGhpcy5hbmltYXRpb25zQnV0dG9ucylcblxuICAgIC8vIFRpdGxlc1xuXG4gICAgdGhpcy5hbmltYXRpb25zQnV0dG9ucyA9IG1hcCh0aGlzLmVsZW1lbnRzLmFuaW1hdGlvbnNCdXR0b25zLCAoZWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBUaXRsZSh7XG4gICAgICAgIGVsZW1lbnRcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIHRoaXMuYW5pbWF0aW9ucy5wdXNoKC4uLnRoaXMuYW5pbWF0aW9uc0J1dHRvbnMpXG5cbiAgICAvLyBQYXJhZ3JhcGhzXG5cbiAgICB0aGlzLmFuaW1hdGlvbnNQYXJhZ3JhcGhzID0gbWFwKHRoaXMuZWxlbWVudHMuYW5pbWF0aW9uc1BhcmFncmFwaHMsIChlbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gbmV3IFBhcmFncmFwaCh7XG4gICAgICAgIGVsZW1lbnRcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIHRoaXMuYW5pbWF0aW9ucy5wdXNoKC4uLnRoaXMuYW5pbWF0aW9uc1BhcmFncmFwaHMpXG5cbiAgICAvLyBMYWJlbHNcblxuICAgIHRoaXMuYW5pbWF0aW9uc0xhYmVscyA9IG1hcCh0aGlzLmVsZW1lbnRzLmFuaW1hdGlvbnNMYWJlbHMsIChlbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gbmV3IExhYmVsKHtcbiAgICAgICAgZWxlbWVudFxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgdGhpcy5hbmltYXRpb25zLnB1c2goLi4udGhpcy5hbmltYXRpb25zTGFiZWxzKVxuXG4gICAgLy8gSGlnaGxpZ2h0c1xuXG4gICAgdGhpcy5haW1hdGlvbnNIaWdobGlnaHRzID0gbWFwKHRoaXMuZWxlbWVudHMuYWltYXRpb25zSGlnaGxpZ2h0cywgKGVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiBuZXcgSGlnaGxpZ2h0KHtcbiAgICAgICAgZWxlbWVudFxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgdGhpcy5hbmltYXRpb25zLnB1c2goLi4udGhpcy5haW1hdGlvbnNIaWdobGlnaHRzKVxuICB9XG5cbiAgY3JlYXRlT2JzZXJ2ZXIgKCkge1xuICAgIHRoaXMub2JzZXJ2ZXIgPSBuZXcgd2luZG93LlJlc2l6ZU9ic2VydmVyKHQgPT4ge1xuICAgICAgZm9yIChjb25zdCBlIG9mIHQpIHtcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0ID0+IHtcbiAgICAgICAgICB0aGlzLnNjcm9sbC5saW1pdCA9IG1hcCh0aGlzLmVsZW1lbnRzLndyYXBwZXIpLmhlaWdodCAtIHdpbmRvdy5pbm5lckhlaWdodFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gICAgdGhpcy5vYnNlcnZlci5vYnNlcnZlKHRoaXMuZWxlbWVudHMud3JhcHBlcilcbiAgfVxuXG4gIHNob3cgKGFuaW1hdGlvbikge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgQ29sb3JzTWFuYWdlci5jaGFuZ2Uoe1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYmFja2dyb3VuZCcpLFxuICAgICAgICBjb2xvcjogdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1jb2xvcicpXG4gICAgICB9KVxuXG4gICAgICBpZiAoYW5pbWF0aW9uKSB7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uSW4gPSBhbmltYXRpb25cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uSW4gPSBHU0FQLnRpbWVsaW5lKClcbiAgICAgICAgdGhpcy5hbmltYXRpb25Jbi5mcm9tVG8oXG4gICAgICAgICAgdGhpcy5lbGVtZW50LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGF1dG9BbHBoYTogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgYXV0b0FscGhhOiAxXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIHRoaXMuYW5pbWF0aW9uSW4uY2FsbChfID0+IHtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpXG5cbiAgICAgICAgcmVzb2x2ZSgpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBoaWRlICgpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIHRoaXMuZGVzdHJveSgpXG5cbiAgICAgIHRoaXMuYW5pbWF0aW9uSW4gPSBHU0FQLnRpbWVsaW5lKClcblxuICAgICAgdGhpcy5hbmltYXRpb25Jbi50byh0aGlzLmVsZW1lbnQsIHtcbiAgICAgICAgYXV0b0FscGhhOiAwLFxuICAgICAgICBvbkNvbXBsZXRlOiByZXNvbHZlXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICAvLyBFdmVudHNcblxuICBvblJlc2l6ZSAoKSB7XG4gICAgaWYgKHRoaXMuZWxlbWVudHMud3JhcHBlcikge1xuICAgICAgdGhpcy5zY3JvbGwubGltaXQgPSB0aGlzLmVsZW1lbnRzLndyYXBwZXIuY2xpZW50SGVpZ2h0IC0gd2luZG93LmlubmVySGVpZ2h0XG4gICAgfVxuXG4gICAgZWFjaCh0aGlzLmFuaW1hdGlvbnMsIChhbmltYXRpb24pID0+IGFuaW1hdGlvbi5vblJlc2l6ZSgpKVxuICB9XG5cbiAgb25XaGVlbCAoeyBwaXhlbFkgfSkge1xuICAgIHRoaXMuc2Nyb2xsLnRhcmdldCArPSBwaXhlbFkgKiAwLjVcbiAgfVxuXG4gIG9uVG91Y2hEb3duIChlKSB7XG4gICAgdGhpcy5pc0Rvd24gPSB0cnVlXG5cbiAgICB0aGlzLnkuc3RhcnQgPSBlLnRvdWNoZXMgPyBlLnRvdWNoZXNbMF0uY2xpZW50WSA6IGUuY2xpZW50WVxuICAgIHRoaXMuc2Nyb2xsLnN0YXJ0ID0gdGhpcy5zY3JvbGwuY3VycmVudFxuICB9XG5cbiAgb25Ub3VjaFVwIChlKSB7XG4gICAgdGhpcy5pc0Rvd24gPSBmYWxzZVxuICB9XG5cbiAgb25Ub3VjaE1vdmUgKGUpIHtcbiAgICBpZiAoIXRoaXMuaXNEb3duKSByZXR1cm5cbiAgICB0aGlzLnkuZW5kID0gZS50b3VjaGVzID8gZS50b3VjaGVzWzBdLmNsaWVudFkgOiBlLmNsaWVudFlcbiAgICBjb25zdCBkaXN0YW5jZSA9IHRoaXMueS5zdGFydCAtIHRoaXMueS5lbmRcblxuICAgIHRoaXMuc2Nyb2xsLnRhcmdldCA9IHRoaXMuc2Nyb2xsLnN0YXJ0ICsgZGlzdGFuY2VcbiAgfVxuXG4gIC8vIExvb3BcblxuICB1cGRhdGUgKCkge1xuICAgIHRoaXMuc2Nyb2xsLnRhcmdldCA9IEdTQVAudXRpbHMuY2xhbXAoMCwgdGhpcy5zY3JvbGwubGltaXQsIHRoaXMuc2Nyb2xsLnRhcmdldClcblxuICAgIHRoaXMuc2Nyb2xsLmN1cnJlbnQgPSBHU0FQLnV0aWxzLmludGVycG9sYXRlKHRoaXMuc2Nyb2xsLmN1cnJlbnQsIHRoaXMuc2Nyb2xsLnRhcmdldCwgMC4xKVxuXG4gICAgaWYgKHRoaXMuc2Nyb2xsLmN1cnJlbnQgPCAwLjAxKSB7XG4gICAgICB0aGlzLnNjcm9sbC5jdXJyZW50ID0gMFxuICAgIH1cblxuICAgIGlmICh0aGlzLmVsZW1lbnRzLndyYXBwZXIpIHtcbiAgICAgIHRoaXMuZWxlbWVudHMud3JhcHBlci5zdHlsZVt0aGlzLnRyYW5zZm9ybVByZWZpeF0gPSBgdHJhbnNsYXRlM2QoMHB4LCAtJHt0aGlzLnNjcm9sbC5jdXJyZW50fXB4LCAwcHgpYFxuICAgIH1cbiAgfVxuXG4gIC8vIExpc3RlbmVyc1xuXG4gIGFkZEV2ZW50TGlzdGVuZXJzICgpIHt9XG5cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMgKCkge31cblxuICAvLyBEZXN0cm95XG5cbiAgZGVzdHJveSAoKSB7XG4gICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVycygpXG4gIH1cbn1cbiIsIl9fd2VicGFja19yZXF1aXJlX18uaCA9ICgpID0+IChcIjE4MmQ2NDQxNmIxNGIzNjRkZThiXCIpIl0sIm5hbWVzIjpbIlBhZ2UiLCJjb25zdHJ1Y3RvciIsImVsZW1lbnQiLCJlbGVtZW50cyIsImlkIiwidGhpcyIsInNlbGVjdG9yIiwic2VsZWN0b3JDaGlsZHJlbiIsInByZWxvYWRlcnMiLCJhbmltYXRpb25zQnV0dG9ucyIsImFuaW1hdGlvbnNUaXRsZXMiLCJhaW1hdGlvbnNIaWdobGlnaHRzIiwiYW5pbWF0aW9uc1BhcmFncmFwaHMiLCJhbmltYXRpb25zTGFiZWxzIiwidHJhbnNmb3JtUHJlZml4IiwiUHJlZml4IiwiY3JlYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic2Nyb2xsIiwiY3VycmVudCIsInRhcmdldCIsImxhc3QiLCJsaW1pdCIsIngiLCJzdGFydCIsImRpc3RhbmNlIiwiZW5kIiwieSIsImVhY2giLCJlbnRyeSIsImtleSIsIndpbmRvdyIsIkhUTUxFbGVtZW50IiwiTm9kZUxpc3QiLCJBcnJheSIsImlzQXJyYXkiLCJxdWVyeVNlbGVjdG9yQWxsIiwibGVuZ3RoIiwiY3JlYXRlQW5pbWF0aW9ucyIsImNyZWF0ZVByZWxvYWRlciIsIm1hcCIsIkFzeW5jTG9hZCIsImFuaW1hdGlvbnMiLCJCdXR0b25zIiwicHVzaCIsIlRpdGxlIiwiUGFyYWdyYXBoIiwiTGFiZWwiLCJIaWdobGlnaHQiLCJjcmVhdGVPYnNlcnZlciIsIm9ic2VydmVyIiwiUmVzaXplT2JzZXJ2ZXIiLCJ0IiwiZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndyYXBwZXIiLCJoZWlnaHQiLCJpbm5lckhlaWdodCIsIm9ic2VydmUiLCJzaG93IiwiYW5pbWF0aW9uIiwiUHJvbWlzZSIsInJlc29sdmUiLCJDb2xvcnNNYW5hZ2VyIiwiYmFja2dyb3VuZENvbG9yIiwiZ2V0QXR0cmlidXRlIiwiY29sb3IiLCJhbmltYXRpb25JbiIsIkdTQVAiLCJmcm9tVG8iLCJhdXRvQWxwaGEiLCJjYWxsIiwiXyIsImFkZEV2ZW50TGlzdGVuZXJzIiwiaGlkZSIsImRlc3Ryb3kiLCJ0byIsIm9uQ29tcGxldGUiLCJvblJlc2l6ZSIsImNsaWVudEhlaWdodCIsIm9uV2hlZWwiLCJwaXhlbFkiLCJvblRvdWNoRG93biIsImlzRG93biIsInRvdWNoZXMiLCJjbGllbnRZIiwib25Ub3VjaFVwIiwib25Ub3VjaE1vdmUiLCJ1cGRhdGUiLCJzdHlsZSIsInJlbW92ZUV2ZW50TGlzdGVuZXJzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImgiXSwic291cmNlUm9vdCI6IiJ9